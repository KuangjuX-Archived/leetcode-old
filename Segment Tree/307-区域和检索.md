```javascript
class segmentTree{
    constructor(start,end,sum){
        this.start = start;
        this.end = end;
        this.sum = sum;
        this.left = this.right = null;
    }
}
var NumArray = function(nums) {
    // console.log(nums.length);
    this.segmentTree = build(0,nums.length-1,nums);
};

var build = function(left,right,array){
    if(left > right){
        return null;
    }

    let root = new segmentTree(left,right,array[left]);
    if(left === right){
        return root;
    }
    let mid = Math.floor((left+right)/2);
    root.left = build(left,mid,array);
    root.right = build(mid+1,right,array);
    root.sum = root.left.sum+root.right.sum;
    return root;
}

NumArray.prototype.update = function(i,val) {
    modify(this.segmentTree,i,val);
};

var modify = function(root,index,value){
    if(root.start == index && root.end == index){
        root.sum = value;
        return;
    }

    let mid = Math.floor((root.start+root.end)/2);
    if(index<=mid){
        modify(root.left,index,value);
    }else{
        modify(root.right,index,value);
    }

    root.sum = root.left.sum+root.right.sum;
}
/** 
 * @param {number} i 
 * @param {number} j
 * @return {number}
 */
NumArray.prototype.sumRange = function(i,j) {
   console.log(this.segmentTree);
   let res = query(this.segmentTree,i,j);
   return res;
};

var query = function(root,start,end){
     if(start == root.start && root.end == end){
        return root.sum;
    }

    let mid = Math.floor((root.start+root.end)/2);
    let leftsum=0;
    let rightsum=0;
    //左子区
    if(mid >= start){
        if(mid<end){
            leftsum = query(root.left,start,mid);
        }else{
            leftsum = query(root.left,start,end);
        }
    }
    //右子区
    if(mid<end){
        if(start <= mid){
            rightsum = query(root.right,mid+1,end);
        }else{
            rightsum = query(root.right,start,end);
        }
    }

    return leftsum+rightsum;
}
```

